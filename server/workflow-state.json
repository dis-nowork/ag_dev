{
  "status": "running",
  "workflowName": "Auto-Worktree - Automatic Isolated Development Environment",
  "workflowId": "auto-worktree",
  "params": {},
  "steps": [
    {
      "id": "extract_story_context",
      "index": 0,
      "phase": "Extract Context",
      "phaseNumber": 1,
      "agent": "system",
      "task": "Extract story information from the trigger context. Determines the story ID to use for worktree naming.",
      "action": "extract_story_info",
      "creates": null,
      "requires": null,
      "dependencies": [],
      "optional": false,
      "condition": null,
      "notes": "Extract story information from the trigger context. Determines the story ID to use for worktree naming.",
      "inputs": {},
      "outputs": [
        "storyId"
      ],
      "onSuccess": null,
      "onFailure": null,
      "timeout": null,
      "status": "running",
      "startedAt": "2026-02-01T06:28:47.744Z",
      "completedAt": null,
      "error": null,
      "sessionKey": null
    },
    {
      "id": "check_existing",
      "index": 1,
      "phase": "Check Existing",
      "phaseNumber": 2,
      "agent": "system",
      "task": "Check if a worktree already exists for this story. If exists, skip creation and optionally switch to it.",
      "action": "check_worktree_exists",
      "creates": null,
      "requires": null,
      "dependencies": [],
      "optional": false,
      "condition": null,
      "notes": "Check if a worktree already exists for this story. If exists, skip creation and optionally switch to it.",
      "inputs": {},
      "outputs": [
        "exists",
        "worktree",
        "action"
      ],
      "onSuccess": null,
      "onFailure": null,
      "timeout": null,
      "status": "running",
      "startedAt": "2026-02-01T06:28:47.744Z",
      "completedAt": null,
      "error": null,
      "sessionKey": null
    },
    {
      "id": "auto_cleanup",
      "index": 2,
      "phase": "Auto Cleanup",
      "phaseNumber": 3,
      "agent": "system",
      "task": "Automatically clean up stale worktrees before creating a new one. Only runs if autoCleanup is enabled in config.",
      "action": "cleanup_stale_worktrees",
      "creates": null,
      "requires": null,
      "dependencies": [],
      "optional": false,
      "condition": null,
      "notes": "Automatically clean up stale worktrees before creating a new one. Only runs if autoCleanup is enabled in config.",
      "inputs": {},
      "outputs": [
        "cleaned",
        "removedIds"
      ],
      "onSuccess": null,
      "onFailure": null,
      "timeout": null,
      "status": "running",
      "startedAt": "2026-02-01T06:28:47.744Z",
      "completedAt": null,
      "error": null,
      "sessionKey": null
    },
    {
      "id": "create_worktree",
      "index": 3,
      "phase": "Create Worktree",
      "phaseNumber": 4,
      "agent": "system",
      "task": "create-worktree.md",
      "action": "create_isolated_worktree",
      "creates": null,
      "requires": null,
      "dependencies": [],
      "optional": false,
      "condition": null,
      "notes": "Create a new isolated worktree for the story. Creates branch auto-claude/{storyId} and working directory.",
      "inputs": {
        "story_id": "{storyId}"
      },
      "outputs": [
        "success",
        "worktree",
        "path",
        "branch",
        "error"
      ],
      "onSuccess": {
        "log": "Created worktree at {path}"
      },
      "onFailure": {
        "action": "halt",
        "error": "Failed to create worktree: {error}"
      },
      "timeout": null,
      "status": "running",
      "startedAt": "2026-02-01T06:28:47.744Z",
      "completedAt": null,
      "error": null,
      "sessionKey": null
    },
    {
      "id": "switch_worktree",
      "index": 4,
      "phase": "Switch Context",
      "phaseNumber": 5,
      "agent": "system",
      "task": "Automatically switch working context to the new worktree. Updates shell environment and notifies user.",
      "action": "switch_to_worktree",
      "creates": null,
      "requires": null,
      "dependencies": [],
      "optional": false,
      "condition": null,
      "notes": "Automatically switch working context to the new worktree. Updates shell environment and notifies user.",
      "inputs": {},
      "outputs": [
        "worktreePath",
        "instructions"
      ],
      "onSuccess": null,
      "onFailure": null,
      "timeout": null,
      "status": "running",
      "startedAt": "2026-02-01T06:28:47.744Z",
      "completedAt": null,
      "error": null,
      "sessionKey": null
    },
    {
      "id": "display_summary",
      "index": 5,
      "phase": "Summary",
      "phaseNumber": 6,
      "agent": "system",
      "task": "Display workflow completion summary with worktree details and next steps for the developer.",
      "action": "show_summary",
      "creates": null,
      "requires": null,
      "dependencies": [],
      "optional": false,
      "condition": null,
      "notes": "Display workflow completion summary with worktree details and next steps for the developer.",
      "inputs": {},
      "outputs": [],
      "onSuccess": null,
      "onFailure": null,
      "timeout": null,
      "status": "running",
      "startedAt": "2026-02-01T06:28:47.744Z",
      "completedAt": null,
      "error": null,
      "sessionKey": null
    }
  ],
  "startedAt": "2026-02-01T06:28:47.743Z",
  "updatedAt": "2026-02-01T06:28:47.743Z",
  "currentPhase": "Summary",
  "error": null
}