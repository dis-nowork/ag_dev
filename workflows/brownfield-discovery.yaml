id: brownfield-discovery
name: Brownfield Discovery — Technical Debt Assessment
description: Comprehensive multi-agent audit of an existing codebase

phases:
  # Phases 1-3 can run in PARALLEL
  - id: system-analysis
    phase: 1
    agent: architect
    parallel: true
    task: Analyze and document system architecture, patterns, tech debt.
    output: .agdev/handoff/system-architecture.md

  - id: frontend-analysis
    phase: 2
    agent: architect
    parallel: true
    task: Analyze frontend — components, UX patterns, design system, debt.
    output: .agdev/handoff/frontend-spec.md

  - id: consolidation
    phase: 3
    agent: architect
    task: |
      Consolidate all findings into a DRAFT technical debt assessment.
      Mark sections needing specialist review.
    input:
      - .agdev/handoff/system-architecture.md
      - .agdev/handoff/frontend-spec.md
    output: .agdev/handoff/technical-debt-DRAFT.md

  - id: qa-review
    phase: 4
    agent: qa
    task: |
      Review the assessment:
      - Identify gaps
      - Assess cross-cutting risks
      - Validate dependencies
      - Suggest tests for resolution
      - Verdict: APPROVED / NEEDS WORK
    input: .agdev/handoff/technical-debt-DRAFT.md
    output: .agdev/handoff/qa-review.md

  - id: final-assessment
    phase: 5
    agent: architect
    condition: qa approved
    task: Finalize assessment incorporating all specialist feedback.
    input: all review files
    output: .agdev/handoff/technical-debt-assessment.md

  - id: executive-report
    phase: 6
    agent: analyst
    task: |
      Create executive report for stakeholders:
      - Cost analysis (resolve vs not resolve)
      - Business impact
      - Timeline with phases
      - ROI estimation
    input: .agdev/handoff/technical-debt-assessment.md
    output: .agdev/handoff/TECHNICAL-DEBT-REPORT.md

  - id: planning
    phase: 7
    agent: pm
    task: Create epic + stories from the validated assessment.
    input: .agdev/handoff/technical-debt-assessment.md
    output: .agdev/handoff/stories/
